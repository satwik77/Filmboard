{% extends "registration/base.html" %}
{% load staticfiles %}
{% block extra_file %}
<link rel="stylesheet" type="text/css" href="{% static 'registration/css/form.css' %}" />
<link href="{% static 'registration/css/bootstrap-datepicker3.min.css' %}" rel="stylesheet">
<script src="{% static 'registration/js/bootstrap-datepicker.min.js' %}"></script>
{% endblock %}
        {% block logout %}
        {% if user.is_authenticated %}
	           	<a href="#"><img src="{% static 'registration/image/user-male.png'  %}" /></a></li>
	    {% else %}
    	    	<a href="#">Guest<img src="{% static 'registration/image/user-male.png'  %}" /></a></li>
        {% endif %}
        {% endblock %}
{% block content %}
<div class="container-fluid" id="after-nav">
	<div class="col-sm-2">
    	<ul class="content-nav">
        <li id="profile"> <div class="icon">&#8592;</div> <a href="../my-projects">Back to My Project</a> </li>
        </ul>
    </div>
    <div class="col-sm-8 content" >
            <div class="row">
            <h2 style="text-align:center;">Add Project</h2>
           
			
            <form id="add_project">
            <strong>
            <fieldset>
            <div class="form-group col-sm-12">
            	<label for="projectName" class="col-md-2 control-label">Project Name</label> 	            	
              <div class="col-md-10">
                	<input type='text' class="form-control" name='name' required>
                </div>
            </div>
            <div class="form-group col-sm-12">
      			<label for="select111" class="col-md-2 control-label">Project Type</label>
		        <div class="col-md-10">
        			<select id="select111" class="form-control"  name='type' style="color:#000">
          				<option style="color:#000">Feature Film</option>
          				<option style="color:#000">Short Film</option>
          				<option style="color:#000">Music Video</option>
          				<option style="color:#000">TV Serial</option>
          				<option style="color:#000">Advertisement</option>
                        <option style="color:#000">Reality Show</option>
                        <option style="color:#000">Any Other</option>
        			</select>
      			</div>
    		</div>
            <div class="form-group col-sm-12">
            	<label for="select111" class="col-md-2 control-label">Project Picture</label>
        		<div class="col-md-10">
					<input type="text" readonly class="form-control" placeholder="Display Picture...">
      				<input type="file" id="dp" value="">
                </div>
        	</div>
            <div class="form-group col-sm-12">
      			<label for="select222" class="col-md-2 control-label">Current Project Status</label>
		        <div class="col-md-10">
        			<select id="select111" class="form-control"  name='status' style="color:#000">
          				<option style="color:#000">On going</option>
          				<option style="color:#000">About to Start</option>
          				<option style="color:#000">Completed</option>
          				<option style="color:#000">Shelved</option>
          				<option style="color:#000">Live</option>
          			</select>
      			</div>
    		</div>
            <div class="form-group col-sm-12">
            	<label for="cost" class="col-sm-2 control-label">Project Cost</label> 	            	<div class="col-sm-10">
                	<input type='number' class="form-control" name='cost' required >
                </div>
            </div>
            <div class="form-group col-sm-12">
            <label for="rolePlayed" class="col-md-2 control-label">Location</label>
            <div class="col-md-10">
              <select name="location" value='{{artist.location}}' class="form-control" required>
                 <option style="color:#000">None</option>
                 {% for l in loc %}
                <option value="{{l.0}}" >{{l.0}}</option>
                 {% endfor %}
              </select>  
            </div>
        </div>
            <div class="form-group col-sm-12">
            <label for="rolePlayed" class="col-md-2 control-label">Language</label>
            <div class="col-md-10">
                    <select id="select111" class="form-control"  name='language' style="color:#000">
          				<option style="color:#000">Hindi</option>
          				<option style="color:#000">English</option>
          				<option style="color:#000">Marathi</option>
          				<option style="color:#000">Punjabi</option>
          				<option style="color:#000">Telugu</option>
          				<option style="color:#000">Bengali</option>
          				<option style="color:#000">Tamil</option>
          				<option style="color:#000">Gujrati</option>
          				<option style="color:#000">French</option>
          				<option style="color:#000">German</option>
          				<option style="color:#000">Spanish</option>
          			</select>

            </div>
        </div>
            <div class="form-group col-sm-12">
            	<label for="start" class="col-sm-2 control-label">Start Date</label> 	            	
              <div class="col-sm-10">
                	<input type='text' class="form-control" name='dstart' required >
                </div>
            </div>
            <div class="form-group col-sm-12">
            	<label for="end" class="col-sm-2 control-label">End Date</label> 	            	
              <div class="col-sm-10">
                	<input type='text' class="form-control" name='dend' required >
                </div>
            </div>
            <div class="form-group col-sm-12">
      			<label for="textArea" class="col-md-2 control-label">Description</label>
		        <div class="col-md-10">
      				<textarea  name="desc" id="body" class="form-control" rows="3" required></textarea>
                </div>
           </div>
		   <br>
            <button type='submit' class="btn btn-raised btn-primary" name='save' style="float:right;margin-right:30px;">Save</button>
        </form>
        </fieldset>
        </strong>
        </div>
    </div>

        </div>
    </div>
    <div class="col-sm-1">
    </div>
</div>
<script src="{% static 'registration/js/ripples.min.js' %}"></script>
<script src="{% static 'registration/js/material.min.js' %}"></script>
<script>
//var cookie = document.cookie;
//console.log(cookie+'null');
  var prof_flag=0
  $("input#dp").on('change', function(e) {
        dp = e.target.files;
        prof_flag=1;
    });
  function collect_data() {
        var data = new FormData() ;
        data.append('name', $('input[name="name"]').val());
        data.append('dstart', $('input[name="dstart"]').val());
        data.append('dend', $('input[name="dend"]').val());
        data.append('cost', $('input[name="cost"]').val());
        data.append('desc', $('textarea[name="desc"]').val());
        data.append('status', $('select[name="status"] option:selected').val());
        data.append('language', $('select[name="language"] option:selected').val());
        data.append('type', $('select[name="type"] option:selected').val());
        data.append('location', $('select[name="location"] option:selected').val());
        if(prof_flag==1){
          $.each(dp, function(key, value)
                {
                    data.append(key, value);
                });
        }
        return data;
    }
    $("form#add_project").submit(function(e) {
        e.preventDefault();
        var dat = collect_data();
        $.ajax({
            url: '../addproject/',
            type: 'POST',
            data: dat,
            cache: false,
            // dataType: 'html',
            processData: false,
            contentType: false,

            success: function(data)
            {
                if(data!='0')
                   window.location.href="../addrequirements/"+data+'/';
			}
        }); 
        
    });

$.material.init();
$('input[name=dend]').datepicker({
    format: "yyyy-mm-dd",
	orientation: "bottom right",
	autoclose: true
});
$('input[name=dstart]').datepicker({
    format: "yyyy-mm-dd",
	orientation: "bottom right",
	autoclose: true
}).on('changeDate',function(e) {
	$('input[name=dend]').datepicker('setStartDate',e.date);
	});
</script>
{% endblock %}
</body>
</html>
